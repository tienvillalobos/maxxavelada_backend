{% extends "base.html" %}
{% block title %}Partidas - Maxxa Velada{% endblock %}
{% block content %}
<h1 class="page-title">Partidas</h1>

<div class="card card-arcade">
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-arcade table-hover mb-0">
        <thead>
          <tr>
            <th>Id</th>
            <th>P1</th>
            <th>P2</th>
            <th>Ganador</th>
            <th>Score</th>
            <th>Stage</th>
            <th>Fecha</th>
          </tr>
        </thead>
        <tbody>
          {% for m in matches %}
          <tr>
            <td>{{ m.id }}</td>
            <td>{{ m.player1_name }}</td>
            <td>{{ m.player2_name }}</td>
            <td><span class="text-warning fw-bold">{{ m.winner_name }}</span></td>
            <td>{{ m.score_p1 }}-{{ m.score_p2 }}</td>
            <td>{{ m.stage or '-' }}</td>
            <td>{{ m.created_at }}</td>
          </tr>
          {% else %}
          <tr><td colspan="7" class="text-center text-muted py-4">No hay partidas registradas.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<nav class="d-flex justify-content-between align-items-center mt-4 flex-wrap gap-2">
  <div>
    {% if has_prev %}
    <a href="/matches?page={{ page - 1 }}" class="btn btn-outline-arcade btn-sm">← Anterior</a>
    {% else %}
    <span class="btn btn-outline-secondary btn-sm disabled">← Anterior</span>
    {% endif %}
    <span class="mx-3 text-muted">Página {{ page }} de {{ pages }}</span>
    {% if has_next %}
    <a href="/matches?page={{ page + 1 }}" class="btn btn-outline-arcade btn-sm">Siguiente →</a>
    {% else %}
    <span class="btn btn-outline-secondary btn-sm disabled">Siguiente →</span>
    {% endif %}
  </div>
  <a href="/matches/new" class="btn btn-arcade btn-sm">+ Nueva partida</a>
</nav>
{% endblock %}
